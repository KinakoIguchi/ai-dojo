この演習では、Amazon SNSとlambdaについて扱う。

# Amazon SNS

## 説明
Amazon SNS(Amazon Simple Notification Service) は、サブスクライブしているエンドポイントまたはクライアントへの
メッセージの配信または送信を、調整および管理するウェブサービスである。

エンドポイントを設定し、トピックをパブリッシュすることで、例えばメッセージを自分のメールアドレスに送ることができる。

[Amazon SNSのリンク](https://ap-northeast-1.console.aws.amazon.com/sns/v3/home?region=ap-northeast-1#/homepage)

参考:
[公式ドキュメント](https://docs.aws.amazon.com/ja_jp/sns/index.html "公式ドキュメント")



【用語】

* Amazon Resource Name（ARN）

AWSにおけるリソースのID。このARNを参照し、配信対象や配信先の呼び出しを行う。
SNSにおいては、後述のエンドポイント、トピック、サブスクリプションにこのARNが割り当てられる。

例）arn:aws:sns:us-east-1:123456789012:push_topicname

* エンドポイント

配信対象端末を識別するためのデータ。デバイストークンより作成する、端末を識別するためのARN。
デバイストークンを登録するとこのエンドポイントが作成され、配信を行う際はこのエンドポイントを指定し、配信する。
簡単に言うとメールアドレスのようなものである。

* トピック

配信対象をグルーピングし、配信対象に一斉に通知を配信するための機能。
このトピックを作成し、エンドポイントを登録したあと、トピックに対し送信したいメッセージを発行すると、トピックに登録されているエンドポイントへ一斉に通知を配信することができる。

・サブスクリプション

サブスクリプションとは、作成したトピックと配信対象のエンドポイントを紐づけるデータ。
サブスクリプションによってトピックにエンドポイントが紐づけられていることで、トピックに対しメッセージを発行すると、
そのトピックに紐づく配信対象のエンドポイントへとメッセージが配信されるようになっている。

・パブリッシュ

通知を配信すること。
SNSにおいて通知の配信は、エンドポイントやトピックに対しメッセージを発行するという形をとっている。
メッセージの発行はアプリケーション画面、トピック画面から可能。
 
## 実習

AWS SNSのチュートリアルに取り組もう。

[SNSチュートリアル](https://docs.aws.amazon.com/ja_jp/sns/latest/dg/sns-tutorial-create-topic.html "SNSチュートリアル")

簡単に説明すると、AWS SNSを使い、自分のメールアドレスにメッセージを送る内容となっている。
チュートリアルの手順に沿って行う。なお、オプションや省略可能というところは飛ばして良い。

(注意点)メールアドレスをエンドポイントに設定した際にメールが飛んでくるので、それをconfirmする必要がある。

# AWS lambda

## 説明
AWS Lambdaとはクラウド上にプログラムを定義しておき、インターネットを通じて実行できるサービスである。
サーバやミドルウェアの管理はAWSがしてくれるので、プログラムだけを考えればいい。

実行させる関数を書いておき、好きなタイミング（例えば、S3に画像がアップロードされたときなど）で実行することができる。
上述のAWS SNSと組み合わせて使うこともできる。

トリガーによって、lambda_handler関数が実行される。

[AWS lambdaのリンク](https://ap-northeast-1.console.aws.amazon.com/lambda/home?region=ap-northeast-1#/discover)

参考:
[公式ドキュメント](https://docs.aws.amazon.com/ja_jp/lambda/?id=docs_gateway "公式ドキュメント")

## 実習
以下の記事の内容を見て、記事内の「はじめに」から「ここまでのまとめ」まで動かす。

[実習の記事](https://dev.classmethod.jp/articles/lambda-my-first-step/#toc-9)

※S3fullaccessroleは最初から権限付与されています。

